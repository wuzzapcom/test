# this parameters are unnecessary for now, hide them but not remove
concurrency: 20
iterations: 2000
request-timeout: 1s
net-error-fatal: true

headers:
  X-Apigw-Tenant-Id:
  - 1

# DO WE NEED setup and teardown sections?
setup:
- method: POST
  target-url: https://{{address}}/api/1/login
  body: |
    {
      "username": "{{user}}",
      "password": "{{password}}"
    }

  save-cookies: true
  response-to-var: login

  headers:
    Content-Type:
      - "application/json"

  ok-codes:
    - 200

# DO WE NEED THIS FEATURE?? {{random}} will be generated from swagger randomly
excercise:
- method: GET
  target-url: https://{{address}}/api/1/groups/1/admins?some_param={{random}}

  headers:
    Cookie:
      - "{{login.AUTH_SERVER_SECURE}}"
      - "{{login.device_cookie}}"

  response-to-var: test

  repeats: 3

  # ok-codes are codes that do not stop test execution
  # options: 
  #   1. remove this field in favour of swagger's response codes
  #   2. use this field to produce some message(swagger's response code used to stop test, ok-codes to generate messages)
  ok-codes:
  - 200

teardown:
  - method: GET
    target-url: https://{{address}}/api/1/groups/1/admins
    headers:
      Cookie:
        - "{{login.AUTH_SERVER_SECURE}}"
        - "{{login.device_cookie}}"

    response-to-var: test

    ok-codes:
    - 200
